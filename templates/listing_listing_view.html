{% extends "navbar_with_avatar_search_bracket.html" %}

{% block style_sheet_link %}
      <link rel="stylesheet" type="text/css" href= "{{ url_for('static',filename='styles/listing_view.css') }}">
      <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
      <link rel="stylesheet" href= "https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity= "sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
      <link href= "https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css"rel="stylesheet"/>

{% endblock %}


{% block content %}
<section>
<div class="container"style="height:{{listings.__len__()*210+200}}px;width:100%;margin-top:80px !important;">
  <h3>Results for Seller Posts </h3> <p class="prompt">{{textbook.title}}</p>
    <p>{{textbook.author}}, {{textbook.publisher}}, {{textbook.edition}}</p>
    <p>Original price: ￥ {{textbook.price}}</p>
    <input type=button class="btn btn-outline-primary" onClick="location.href='/listing/view_listing?id={{textbook.id}}&listing_type=buyer_post'" value='View Buyer Posts'>
    {% if listings | count == 0 %}
        <p></p>
        <h2>No Seller listings are currently available for {{textbook.title}}</h2>
    {% endif %}
    

  <hr>
    <!-- Listings -->
    {% for listing in listings %}
    <div class="listing-wrapper cursor-pointer" id="{{listing.id}}">
        <div style="display:none;">
            
            <p id="option-content">{{listing.purchase_option}}</p>
            <p id="offered-price-content">{{listing.offered_price}}</p>
            <p id="condition-content">{{listing.condition}}</p>
            <p id="defect-content">{{listing.defect}}</p>
            <p id="checked-user-num-content">{{listing.unlocked_user_ids.__len__()}}</p>
        </div>
        <img class="listing-img" src="/image/upload?id={{listing.book_image_ids.split(',')[0]}}">
        
        <div class="listing-info">
            <div class="row-1">
                <svg width="20px" height="20px" viewBox="0 0 16 16" class="bi bi-bookmark-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.74.439L8 13.069l-5.26 2.87A.5.5 0 0 1 2 15.5V2z"/>
                </svg>
                <p class="option">{{listing.purchase_option}}</p>
                <img class="avatar_icon" src="/image/avatar?id={{listing.avatar_id}}">
            </div>
            <div class="row-2">
                <p class="price">￥{{listing.offered_price}}</p>
            </div>
            <div class="row-3" style="margin-left:5px;">
                <p class="other-info">Posted on: {{listing.date_added}}</p>
            </div>
        </div>

        <div class="condition-container" style="display:flex;">
            <p class="condition-label">Condition</p>
            <div class="condition-label-container" style="float:left;">
                <span class="badge badge-success condition">{{listing.condition}}</span>
                {% for d in listing.defect.split(",") %}
                <span class="badge badge-warning">{{d}}</span>
                {% endfor %}

            </div>
        </div>
    </div>
    {% endfor %}
</div>
</section>




    <!-- Pop-up -->
<div class="hover_bkgr_fricc">
    <span class="helper"></span>
    <div class = "meta_container">
        <div style="height:100%;width:100;display:flex;">


            <div class="image_container">
                <!--Carousel Wrapper-->
                <div id="carousel-example-1z" class="carousel carousel-fade z-depth-1-half" data-interval="false">
                  <!--Indicators-->
                  <ol class="carousel-indicators">
                    <li data-target="#carousel-example-1z" data-slide-to="0" class="active">Fish</li>
                    <li data-target="#carousel-example-1z" data-slide-to="1">Cab</li>
                    <li data-target="#carousel-example-1z" data-slide-to="2"></li>
                  </ol>
                  <!--/.Indicators-->
                  <!--Slides-->
                  <div class="carousel-inner" role="listbox">
                    <!--First slide-->
                    <div class="carousel-item active">
                      <img class="d-block w-100" src="/image/avatar?id=1" alt="First slide">
                    </div>
                    <!--/First slide-->
                    <!--Second slide-->
                    <div class="carousel-item">
                      <img class="d-block w-100" src="/image/avatar?id=2" alt="Second slide">
                    </div>
                    <!--/Second slide-->
                    <!--Third slide-->
                    <div class="carousel-item">
                      <img class="d-block w-100" src="/image/avatar?id=3" alt="Third slide">
                    </div>
                    <!--/Third slide-->
                  </div>
                  <!--/.Slides-->
                  <!--Controls-->
                  <a class="carousel-control-prev" href="#carousel-example-1z" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true" ></span>
                    <span class="sr-only">Previous</span>
                  </a>
                  <a class="carousel-control-next" href="#carousel-example-1z" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                  </a>
                  <!--/.Controls-->
                </div>
                <!--/.Carousel Wrapper-->

            </div>



            <div class="info_container">

                <div class="exposed_info">

                    <div class ="exposed_info_up">
                        <p class="info_book_name" >{{textbook.title}}</p>
                        <hr>

                        <div style="display:flex;width:100%; margin-left:20px;height:20%;">
                            <img class="nav_avatar_icon" src="/image/avatar?id={{avatar_id}}">
                            <text class="pop_up_purchase_option"></text>
                            <text class="pop_up_offered_price"></text>
                            <text class="pop_up_original_price">￥{{textbook.price}}</text>
                        </div>

                    </div>

                    <div class="exposed_info_down">
                        <div style="margin-left:20px; width:50%; align-self:center;">
                            <text class="pop-up-label">ISBN: </text>
                            <text class="pop-up-info">{{textbook.ISBN}}</text>
                            <br/>
                            <br/>
                            <text class="pop-up-label">Author: </text>
                            <text class="pop-up-info">{{textbook.author}}</text>
                        </div>

                        <div style="width:50%; align-self:center;">
                            <text class="pop-up-label">Condition: </text>
                            <text id="pop-up-condition" class="pop-up-info"></text>
                            <br/>
                            <br/>
                            <text class="pop-up-label">Defects: </text>
                            <text id="pop-up-defect" class="pop-up-info"></text>
                        </div>

                    </div>

                    <div style="width:90%; margin-top:10px;height:20%;margin-left:20px;">
                            <text class="pop_up_checked_user" style="width:100%;"></text>
                    </div>


                </div>

                <div class="hidden_info" id="not_requested">
                    <div class="seller-info">
                        <p class="pop-up-name">Yuechuan Zhang</p>
                        <hr>
                        <p class="pop-up-contact-info">yz3919@nyu.edu</p>
                        <p class="pop-up-contact-info">Wechat:Robertation</p>
                    </div>
                    <div class="info-shield">
                        <h3 class="striped-prompt">Unlock Seller Info</h3>
                    </div>
                </div>

            </div>


        </div>


    </div>

</div>


{% endblock %}






{% block script %}
<script type="text/javascript" src="/static/js/listing_view.js"></script>
<script src="https://code.iconify.design/1/1.0.7/iconify.min.js"></script>
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
{% endblock %}