{% extends "navbar_with_avatar.html" %}


{% block style_sheet_link %}
      <link rel="stylesheet" type="text/css" href= "{{ url_for('static',filename='styles/profile.css') }}">
      <link rel="stylesheet" type="text/css" href= "{{ url_for('static',filename='styles/navbar.css') }}">
{% endblock %}

{% block content %}
<div class="container" style="margin-top: 50px;">

      <div class="row gutters-sm">
        <div class="col-md-4 d-none d-md-block">
          <div class="card">
            <div class="card-body">
              <nav class="nav flex-column nav-pills nav-gap-y-1">
                <a href="#profile" data-toggle="tab" class="nav-item nav-link has-icon nav-link-faded active">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user mr-2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>Profile Information
                </a>
                <a href="#account" data-toggle="tab" class="nav-item nav-link has-icon nav-link-faded">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-settings mr-2"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>Account Settings
                </a>
                <a href="#notification" data-toggle="tab" class="nav-item nav-link has-icon nav-link-faded">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bell mr-2"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>Notification
                </a>
              </nav>
            </div>
          </div>
        </div>
        <div class="col-md-8">


          <div class="card" style="margin-bottom:200px;">

            <div class="card-header border-bottom mb-3 d-flex d-md-none">
              <ul class="nav nav-tabs card-header-tabs nav-gap-x-1" role="tablist">
                <li class="nav-item">
                  <a href="#profile" data-toggle="tab" class="nav-link has-icon active"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg></a>
                </li>
                <li class="nav-item">
                  <a href="#account" data-toggle="tab" class="nav-link has-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-settings"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg></a>
                </li>
                <li class="nav-item">
                  <a href="#notification" data-toggle="tab" class="nav-link has-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bell"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg></a>
                </li>
              </ul>
            </div>

            <div class="card-body tab-content" >


              <div class="tab-pane active" id="profile">
                <h6>YOUR PROFILE INFORMATION</h6>
                <hr>
                <form >
                  <div style="display:flex;">
                    <div class="form-group">
                      <label >Full Name</label>
                        <div style="display:flex;">
                          <input type="text" name = "first_name" class="form-control" id="first_name" aria-describedby="fullNameHelp" value = "{{first_name}}"  style = "width:40% !important; margin-right:10px !important;">
                          <input type="text" name = "last_name" class="form-control" id="last_name" value = "{{last_name}}"  style = "width:40% !important;">
                        </div>
                        <small id="fullNameHelp" class="form-text text-muted">You can change or remove it at any time.</small>
                    </div>
                    <img id = "avatar" value = "{{avatar_id}}" class="avatar trigger_popup_fricc" src="/image/avatar?id={{avatar_id}}" style="height:100px; width:100px; border-radius: 50% !important; margin-left:125px; margin-top:5px;">
                  </div>
                  <div class="form-group">
                    <label>Major</label>
                    <select name = "major" class="form-control" id="major" value = "{{majors[0]}}">
                      {% for m in majors %}
                        {% if m == major %}
                          <option value ="{{major}}" selected="selected">{{major}}</option>
                        {% else %}
                          <option value ="{{m}}">{{m}}</option>
                        {% endif %}
                      {% endfor %}
                    </select>
                  </div>
                  <div class="form-group">
                    <label >Class</label>
                    <select name = "class" class="form-control" id="class" value = "{{class_year}}">
                      {% for year in ["2018","2019","2020","2021","2022","2023","2024"] %}
                        {% if year == class_year %}
                          <option value ="{{class_year}}" selected="selected">{{class_year}}</option>
                        {% else %}
                          <option value ="{{year}}">{{year}}</option>
                        {% endif %}
                      {% endfor %}
                    </select>
                  </div>
                  <div class="form-group">
                    <label>Contact Information</label>
                    <input name = "contact_information" type="text" class="form-control" id="contact_information" value = "{{contact_information}}">
                  </div>
                  <div class="form-group small text-muted">
                    All of the fields on this page are optional and can be deleted at any time, and by filling them out, you're giving us consent to share this data wherever your user profile appears.
                  </div>
                </form>
                <button id="update_profile" class="btn btn-primary">Update Profile</button>
              </div>

              <div class="tab-pane" id="account">
                <h6>ACCOUNT SETTINGS</h6>
                <hr>
                <h8>Change Password</h8>
                <form id="settings">
                  <div class="form-group">
                    <!-- <input type="text"  placeholder="Enter your old password"> -->
                    <input type="password" id="password"  class="form-control" name="password" placeholder="Password">
                    <input type="password" id="re_password"  class="form-control" name="re_password" placeholder="Confirm your password">
                  </div>
                    <input id="update_password" class="btn btn-primary" type = "button" value="Update Password"></input>
                  <hr>
                  <div class="form-group">
                    <label class="d-block text-danger"></label>
                    <p class="text-muted font-size-sm">Once you delete your account, there is no going back. Please be certain.</p>
                  </div>
                  <input id="delete" class="btn btn-danger" type="button" value='Delete Account'></input>
                </form>
                </div>
                
              <div class="tab-pane" id="notification">
                <h6>NOTIFICATION SETTINGS</h6>
                <hr>
                <label class="d-block mb-0">Email Notification</label>
                  <form>
                    <div class="small text-muted mb-3">Would you like to receive notifications via email?</div>
                    <div class="custom-control">
                      {% if user.email_notification == "true" %}
                        <input type="radio" name="email_notification" id="email" value="true" checked="">
                        <label for="email">Yes, I want to receive email notifications</label>
                        <pre></pre>
                        <input type="radio" name="email_notification" id="no_email" value="false">
                        <label for="no_email">No, I do not want to receive email notifications</label>
                      {% else%}
                        <input type="radio" name="email_notification" id="email" value="true">
                        <label for="email">Yes, I want to receive email notifications</label>
                        <pre></pre>
                        <input type="radio" name="email_notification" id="no_email" value="false" checked="">
                        <label for="no_email">No, I do not want to receive email notifications</label>
                      {% endif %}
                    </div>  
                   <pre></pre> 
                <div class="form-group">
                  <label >How often do you want to hear from us?</label>
                  <div class="small text-muted mb-3">We will send you a summary on your active listings</div>
                  <select name = "frequency" class="form-control" id="frequency" value = "{{email_notification_freq}}">
                    {% for freq in ["Daily", "Weekly", "Monthly", "Never"] %}
                      {% if freq == user.email_notification_freq %}
                        <option value ="{{email_notification_freq}}" selected="selected">{{user.email_notification_freq}}</option>
                      {% else %}
                        <option value ="{{freq}}">{{freq}}</option>
                      {% endif %}
                    {% endfor %}
                  </select>
                </div>
                <hr>
                <div class="form-group">
                  <label class="d-block mb-0">Additional Notifications</label>
                    <div class="small text-muted mb-3">Receive notifications via email, regardless of frequency preference</div>
                    <div class="custom-control custom-checkbox">
                      {% if user.send_email_on_listing_unlocked == "true" %}
                        <input type="checkbox" class="custom-control-input" id="user_unlock" checked="">
                      {% else %}
                        <input type="checkbox" class="custom-control-input" id="user_unlock">
                      {% endif %}
                      <label class="custom-control-label" for="user_unlock">Email me when another user unlocks my info in one of my listings.</label>
                    </div>
                    <div class="custom-control custom-checkbox">
                      {% if user.send_email_on_requested_book_available == "true" %}
                        <input type="checkbox" class="custom-control-input" id="book_listed" checked="">
                      {% else %}
                        <input type="checkbox" class="custom-control-input" id="book_listed">
                      {% endif %}
                      <label class="custom-control-label" for="book_listed">Email me when a book I have requested has been listed.</label>
                    </div>
                  <input type="button" id="update_notifications" class="btn btn-primary" value="Update Notifications Settings"></input>
                </div>
              </div>

            </div>

          </div>

        </div>

</div>


<div class="hover_bkgr_fricc">
    <span class="helper"></span>
        <div class = "avatar_option_container">
          <div class="avatar_container">
            {% for id in avatar_options %}
              <img class = "avatar_option" value = "{{id}}" src="/image/avatar?id={{id}}">
            {% endfor %}
          </div>
          <div style="height: 8%; margin-left:30px !important; display:flex;">
            <button id = "avatar_select" class="btn btn-primary" style="float:left; width: 20%;">Select</button>
            <button id = "avatar_select_cancel" class="btn btn-primary" style="margin-left: 20px !important; width: 20%;">Cancel</button>
          </div>
        </div>
</div>
{% endblock %}

{% block script %}
<script type="text/javascript" src="/static/js/profile.js"></script>
{% endblock %}